<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asksibot - Pictogram Search Assistant</title>
    <style>
        /* General styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            text-align: center;
        }

        /* Header styles */
        header {
            background-color: #d3d3d3;
            width: 100%;
            padding: 20px 40px;
            box-sizing: border-box;
        }

        header img {
            width: 70px;
            height: auto;
            margin-bottom: 10px;
        }

        header h1 {
            margin: 0;
            font-size: 2em;
        }

        .subtext {
            font-size: 0.9em;
            margin-top: 5px;
        }

        nav {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        nav a {
            margin: 5px 10px;
            color: black;
            text-decoration: none;
            font-size: 1em;
        }

        /* Content styles */
        .content {
            max-width: 800px;
            width: 100%;
            margin: 20px auto;
            padding: 0 20px;
            box-sizing: border-box;
            text-align: left;
        }

        .content h2 {
            font-size: 1.8em;
            margin-bottom: 20px;
            text-align: center;
        }

        /* Form styles */
        form {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-sizing: border-box;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        label {
            display: block;
            margin-top: 15px;
            font-weight: bold;
        }

        .instruction {
            font-size: 0.9em;
            color: #555;
            margin-bottom: 5px;
        }

        input[type="text"], textarea {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            box-sizing: border-box;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        /* Pre-defined options styles */
        .options-section {
            margin-top: 10px;
        }

        .options-section h4 {
            margin-bottom: 5px;
            font-size: 1em;
        }

        .options-list {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }

        .options-list button {
            margin: 5px;
            padding: 5px 10px;
            font-size: 0.9em;
            background-color: #e7e7e7;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            flex: 1 1 calc(33.333% - 10px); /* Three buttons per row */
            box-sizing: border-box;
        }

        .options-list button:hover {
            background-color: #ccc;
        }

        /* Adjust button sizing for smaller screens */
        @media (max-width: 600px) {
            .options-list button {
                flex: 1 1 calc(50% - 10px); /* Two buttons per row */
            }
        }

        /* Button styles */
        button[type="submit"], .results button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #fdb201;
            color: #000;
            border-radius: 30px;
            border: 2px solid #000;
            font-size: 1em;
            cursor: pointer;
            transition: 0.3s;
        }

        button[type="submit"]:hover, .results button:hover {
            background-color: #1d1e20;
            color: #fff;
        }

        /* Results section */
        #results {
            display: none;
            margin-top: 30px;
            background-color: #e7f3fe;
            padding: 20px;
            box-sizing: border-box;
            border-left: 6px solid #2196F3;
            border-radius: 8px;
        }

        #results h2 {
            color: #2196F3;
        }

        #results ol {
            margin-left: 20px;
        }

        .attribution {
            margin-top: 20px;
            font-size: 0.8em;
            color: #555;
            text-align: center;
        }

        .attribution a {
            color: #555;
            text-decoration: underline;
        }

        /* Pictogram styles */
        .pictogram-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .pictogram-item {
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 8px;
            background-color: #fff;
            width: 150px;
            text-align: center;
        }

        .pictogram-item img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
        }

        .download-button {
            margin-top: 5px;
            padding: 5px 10px;
            background-color: #fdb201;
            color: #000;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 0.9em;
        }

        .download-button:hover {
            background-color: #1d1e20;
            color: #fff;
        }

        .error-message {
            color: red;
            text-align: center;
            margin-top: 20px;
        }

        /* Responsive adjustments for smaller screens */
        @media (max-width: 600px) {
            header h1 {
                font-size: 1.5em;
            }

            .subtext {
                font-size: 0.8em;
                line-height: 1.4em;
            }

            nav a {
                font-size: 0.9em;
                margin: 5px 8px;
            }

            .content h2 {
                font-size: 1.4em;
            }

            label {
                font-size: 0.9em;
            }

            button {
                font-size: 0.9em;
            }
        }
    </style>
    <!-- Include Axios from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>

<header>
    <img src="media/asksiboticon.png" alt="Asksibot Logo">
    <h1>Asksibot - The Occupational Therapy Hub</h1>
    <p class="subtext">Developed on OpenAI by Christopher Horne, OTR/L</p>
    <nav>
        <a href="index.html">Home</a>
        <a href="/surveys/survey_selection.html">Surveys</a>
        <a href="/timeline/timelineupto80.html">Timeline</a>
        <a href="/shop/index.html">Shop</a>
        <a href="/contact.html">Contact</a>
    </nav>
</header>
<div class="content">
    <h2>Pictogram Search Assistant</h2>
    <form id="pictogramForm">
        <label for="topic">Topic or Subject:</label>
        <p class="instruction">Use your own term or select a topic from below.</p>
        <input type="text" id="topic" name="topic" placeholder="Enter a topic or select one" required>
        <div class="options-section">
            <h4>Select a Topic:</h4>
            <div class="options-list" id="topicOptions"></div>
        </div>
        <label for="keywords">Specific Keywords or Concepts:</label>
        <p class="instruction">Enter your own keywords or select from the options below.</p>
        <textarea id="keywords" name="keywords" placeholder="Enter keywords separated by commas" required></textarea>
        <div class="options-section">
            <h4>Select Keywords:</h4>
            <div class="options-list" id="keywordOptions"></div>
        </div>
        <button type="submit">Generate Search Terms</button>
    </form>
    <div id="results">
        <h2>Your Search Terms</h2>
        <ul id="searchTermsList"></ul>
        <h3>Pictograms:</h3>
        <div id="pictogramResults" class="pictogram-container"></div>
        <div id="error" class="error-message"></div>
    </div>
</div>

<footer>
    <p class="attribution">
        The pictographic symbols used are the property of the Government of Arag√≥n and have been created by Sergio Palao for ARASAAC (<a href="http://www.arasaac.org" target="_blank">http://www.arasaac.org</a>), distributed under the Creative Commons License BY-NC-SA.
    </p>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Define the 18 topics and their 30 keywords each
        const topics = {
            "Daily Routine": [
                "Wake up", "Brush teeth", "Wash face", "Take a shower", "Get dressed",
                "Eat breakfast", "Pack lunch", "Go to school/work", "Study", "Attend class",
                "Playtime", "Lunch break", "Homework", "Snack time", "Exercise",
                "Read a book", "Watch TV", "Dinner", "Family time", "Clean up",
                "Take a bath", "Put on pajamas", "Bedtime story", "Go to bed", "Set alarm",
                "Say goodnight", "Brush hair", "Use the toilet", "Wash hands", "Drink water"
            ],
            "Emotions": [
                "Happy", "Sad", "Angry", "Excited", "Nervous",
                "Calm", "Scared", "Surprised", "Confused", "Frustrated",
                "Proud", "Embarrassed", "Lonely", "Bored", "Anxious",
                "Jealous", "Disappointed", "Grateful", "Hopeful", "Curious",
                "Relieved", "Guilty", "Ashamed", "Content", "Overwhelmed",
                "Shocked", "Amused", "Confident", "Worried", "Envious"
            ],
            "School Activities": [
                "Fire drill", "Standing in line", "No touching", "Sit", "Bathroom",
                "Recess", "Work", "Circle time", "Read", "Write",
                "Raise hand", "Listen", "Quiet", "Snack time", "Lunch",
                "Play", "Share", "Clean up", "Art class", "Music class",
                "Gym class", "Library", "School bus", "Teacher", "Personal space",
                "Time out", "Stop", "More", "Good", "Student"
            ],
            "Well-Being Questions and Communication": [
                "Pain", "Sore throat", "Head hurts", "Tired", "Constipated",
                "Anxious", "How are you feeling?", "Happy", "Sad", "Angry",
                "Hungry", "Thirsty", "Sick", "Calm", "Nervous",
                "Excited", "Scared", "Bored", "Confused", "Frustrated",
                "Comfortable", "Uncomfortable", "Safe", "Unsafe", "Help",
                "Stop", "More", "Yes", "No", "Good"
            ],
            "Medical Appointments": [
                "Appointment", "Waiting room", "Nurse", "Doctor", "Check-up",
                "Blood pressure", "Temperature", "Stethoscope", "Heartbeat", "Injection",
                "Medicine", "Pills", "Syrup", "X-ray", "MRI",
                "Blood test", "Urine test", "Bandage", "Cast", "Thermometer",
                "Pain", "Hurt", "Calm", "Breathe", "Sit still",
                "Open mouth", "Say \"ah\"", "Lie down", "Stand up", "All done"
            ],
            "People": [
                "Mom", "Dad", "Sister", "Brother", "Grandmother",
                "Grandfather", "Friend", "Teacher", "Policeman", "Doctor",
                "Occupational Therapist", "Speech Therapist", "Physical Therapist (PT)", "Priest", "Nurse",
                "Dentist", "Neighbor", "Classmate", "Principal", "Coach",
                "Babysitter", "Librarian", "Bus driver", "Mail carrier", "Firefighter",
                "Chef", "Farmer", "Mechanic", "Cashier", "Waiter/Waitress"
            ],
            "Food and Drink": [
                "Breakfast", "Lunch", "Dinner", "Snack", "Water",
                "Juice", "Milk", "Tea", "Coffee", "Fruit",
                "Vegetables", "Bread", "Cereal", "Sandwich", "Soup",
                "Salad", "Pasta", "Rice", "Meat", "Fish",
                "Chicken", "Eggs", "Cheese", "Yogurt", "Ice cream",
                "Cake", "Cookies", "Candy", "Pizza", "Hamburger"
            ],
            "Safety Signs": [
                "Stop", "Caution", "Exit", "No entry", "Danger",
                "Fire exit", "Emergency", "First aid", "No smoking", "Wet floor",
                "Do not touch", "No running", "No food or drink", "No pets", "No parking",
                "Hand wash", "Keep out", "Authorized personnel only", "High voltage", "Poison",
                "Biohazard", "Flammable", "Radiation", "Hard hat area", "Safety glasses required",
                "Ear protection required", "No cell phones", "No photography", "Slippery when wet", "Keep door closed"
            ],
            "Household Chores": [
                "Washing dishes", "Vacuuming", "Sweeping", "Mopping", "Dusting",
                "Laundry", "Folding clothes", "Ironing", "Making the bed", "Cleaning windows",
                "Taking out the trash", "Recycling", "Watering plants", "Feeding pets", "Walking the dog",
                "Setting the table", "Clearing the table", "Cooking", "Baking", "Washing the car",
                "Organizing toys", "Cleaning the bathroom", "Cleaning the kitchen", "Wiping surfaces", "Changing sheets",
                "Polishing furniture", "Cleaning the fridge", "Emptying the dishwasher", "Sweeping the porch", "Raking leaves"
            ],
            "Directions": [
                "Left", "Right", "Straight", "Turn around", "Up",
                "Down", "Forward", "Backward", "Stop", "Go",
                "Enter", "Exit", "Follow", "Wait", "Come here",
                "Go there", "Upstairs", "Downstairs", "Inside", "Outside",
                "Near", "Far", "Next to", "Across", "Through",
                "Around", "Over", "Under", "Beside", "Between"
            ],
            "Holidays and Seasons": [
                "Christmas", "Easter", "Halloween", "Thanksgiving", "New Year's Day",
                "Valentine's Day", "Independence Day", "Hanukkah", "Diwali", "St. Patrick's Day",
                "Mother's Day", "Father's Day", "Labor Day", "Memorial Day", "Veterans Day",
                "Spring", "Summer", "Fall (Autumn)", "Winter", "Rainy",
                "Snowy", "Sunny", "Cloudy", "Windy", "Hot",
                "Cold", "Warm", "Cool", "Leaves falling", "Flowers blooming"
            ],
            "Body Parts": [
                "Head", "Face", "Eyes", "Ears", "Nose",
                "Mouth", "Teeth", "Tongue", "Hair", "Neck",
                "Shoulders", "Arms", "Elbows", "Hands", "Fingers",
                "Chest", "Stomach", "Back", "Legs", "Knees",
                "Feet", "Toes", "Heart", "Lungs", "Brain",
                "Muscles", "Bones", "Skin", "Nails", "Joints"
            ],
            "Health and Hygiene": [
                "Wash hands", "Brush teeth", "Take a bath", "Use the toilet", "Comb hair",
                "Cut nails", "Blow nose", "Cough", "Sneeze", "Use tissue",
                "Wash face", "Brush hair", "Floss teeth", "Use hand sanitizer", "Drink water",
                "Eat healthy", "Exercise", "Sleep", "Take medicine", "Visit doctor",
                "Visit dentist", "Wear mask", "Check temperature", "Bandage", "Rest",
                "Clean ears", "Apply lotion", "Use sunscreen", "Change clothes", "Stay clean"
            ],
            "Weather and Nature": [
                "Sunny", "Rainy", "Cloudy", "Snowy", "Windy",
                "Stormy", "Foggy", "Hot", "Cold", "Warm",
                "Cool", "Thunder", "Lightning", "Hail", "Tornado",
                "Tree", "Flower", "Grass", "Mountain", "River",
                "Ocean", "Lake", "Forest", "Desert", "Beach",
                "Rock", "Sand", "Leaf", "Animal", "Plant"
            ],
            "Time Concepts": [
                "Morning", "Afternoon", "Evening", "Night", "Day",
                "Week", "Month", "Year", "Today", "Tomorrow",
                "Yesterday", "Calendar", "Clock", "Hour", "Minute",
                "Second", "Now", "Later", "Soon", "Before",
                "After", "Early", "Late", "On time", "Schedule",
                "Alarm", "Timer", "Bedtime", "Lunchtime", "Playtime"
            ],
            "Health Habits": [
                "Wash hands", "Brush teeth", "Take a bath", "Use the toilet", "Comb hair",
                "Cut nails", "Blow nose", "Cough", "Sneeze", "Use tissue",
                "Wash face", "Brush hair", "Floss teeth", "Use hand sanitizer", "Drink water",
                "Eat healthy", "Exercise", "Sleep", "Take medicine", "Visit doctor",
                "Visit dentist", "Wear mask", "Check temperature", "Bandage", "Rest",
                "Clean ears", "Apply lotion", "Use sunscreen", "Change clothes", "Stay clean"
            ],
            "Fun and Recreation": [
                "Play", "Game", "Toy", "Puzzle", "Drawing",
                "Painting", "Coloring", "Reading", "Watching TV", "Listening to music",
                "Dancing", "Singing", "Playing an instrument", "Sports", "Soccer",
                "Basketball", "Swimming", "Running", "Biking", "Hiking",
                "Camping", "Fishing", "Playing with pets", "Visiting the park", "Swinging",
                "Sliding", "Climbing", "Building blocks", "Playing cards", "Board games"
            ],
            "Transportation and Technology": [
                // Transportation
                "Car", "Bus", "Train", "Airplane", "Bicycle",
                "Motorcycle", "Boat", "Taxi", "Truck", "Subway",
                "Tram", "Helicopter", "Scooter", "Ferry", "Ambulance",
                // Technology
                "Computer", "Laptop", "Tablet", "Smartphone", "Television",
                "Camera", "Printer", "Keyboard", "Mouse", "Headphones",
                "Speaker", "Charger", "Remote control", "USB drive", "Smartwatch"
            ]
,
            // Continue defining all 18 topics with their keywords
        };

        const topicOptionsDiv = document.getElementById('topicOptions');
        const keywordOptionsDiv = document.getElementById('keywordOptions');
        const topicInput = document.getElementById('topic');
        const keywordsTextarea = document.getElementById('keywords');
        const pictogramForm = document.getElementById('pictogramForm');
        const resultsDiv = document.getElementById('results');
        const searchTermsList = document.getElementById('searchTermsList');
        const pictogramResultsDiv = document.getElementById('pictogramResults');
        const errorDiv = document.getElementById('error');

        function generateTopicButtons() {
            for (let topic in topics) {
                const button = document.createElement('button');
                button.type = 'button';
                button.textContent = topic;
                button.addEventListener('click', function() {
                    topicInput.value = topic;
                    loadKeywords(topic);
                });
                topicOptionsDiv.appendChild(button);
            }
        }

        function loadKeywords(selectedTopic) {
            keywordOptionsDiv.innerHTML = '';
            (topics[selectedTopic] || []).forEach(keyword => {
                const button = document.createElement('button');
                button.type = 'button';
                button.textContent = keyword;
                button.addEventListener('click', function() {
                    addKeywordToTextarea(keyword);
                });
                keywordOptionsDiv.appendChild(button);
            });
        }

        function addKeywordToTextarea(keyword) {
            let currentKeywords = keywordsTextarea.value.trim();
            keywordsTextarea.value = currentKeywords ? `${currentKeywords}, ${keyword}` : keyword;
        }

        pictogramForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const topic = topicInput.value.trim();
            const keywords = keywordsTextarea.value.trim();
            if (!topic && !keywords) {
                errorDiv.textContent = 'Please enter a topic or at least one keyword.';
                return;
            }

            const searchTerms = [topic, ...keywords.split(',').map(k => k.trim())].filter(Boolean);
            displayResults([...new Set(searchTerms)]);
            fetchPictograms(searchTerms.slice(0, 5));
        });

        function displayResults(searchTerms) {
            searchTermsList.innerHTML = searchTerms.map(term => `<li>${term}</li>`).join('');
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        async function fetchPictograms(searchTerms) {
            pictogramResultsDiv.innerHTML = '';
            errorDiv.textContent = '';
            for (const term of searchTerms) {
                try {
                    const response = await axios.get(`https://api.arasaac.org/api/pictograms/en/search/${encodeURIComponent(term)}`);
                    const pictograms = response.data.slice(0, 10); // Limit to 10 pictograms per term

                    if (pictograms.length === 0) continue;

                    const section = document.createElement('div');
                    section.innerHTML = `<h4>Pictograms for "${term}"</h4>`;
                    const container = document.createElement('div');
                    container.classList.add('pictogram-container');

                    pictograms.forEach(pictogram => {
                        const pictogramItem = document.createElement('div');
                        pictogramItem.classList.add('pictogram-item');

                        const link = document.createElement('a');
                        link.href = `https://static.arasaac.org/pictograms/${pictogram._id}/${pictogram._id}_500.png`;
                        link.target = '_blank';

                        const img = document.createElement('img');
                        img.src = `https://static.arasaac.org/pictograms/${pictogram._id}/${pictogram._id}_300.png`;
                        img.alt = pictogram.keywords.map(k => k.keyword).join(', ');
                        link.appendChild(img);

                        pictogramItem.appendChild(link);
                        container.appendChild(pictogramItem);
                    });

                    section.appendChild(container);
                    pictogramResultsDiv.appendChild(section);
                } catch (error) {
                    errorDiv.textContent = 'An error occurred while fetching pictograms.';
                }
            }
        }

        generateTopicButtons();
        loadKeywords("Daily Routine"); // Load default topic
    });
</script>

</body>
</html>
